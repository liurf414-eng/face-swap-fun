# PiAPI è§†é¢‘æ¢è„¸é›†æˆæŒ‡å—

## ğŸš€ PiAPI æ¦‚è¿°

PiAPI æä¾›é«˜è´¨é‡çš„è§†é¢‘æ¢è„¸æœåŠ¡ï¼Œä½¿ç”¨ Qubico/video-toolkit æ¨¡å‹ã€‚

## ğŸ“‹ API ä¿¡æ¯

### ç«¯ç‚¹
- **åˆ›å»ºä»»åŠ¡**: `POST https://api.piapi.ai/api/v1/task`
- **æŸ¥è¯¢ä»»åŠ¡**: `GET https://api.piapi.ai/api/v1/task/{task_id}`

### è®¤è¯
- Header: `x-api-key: your_api_key`

### æ¨¡å‹ä¿¡æ¯
- **æ¨¡å‹**: `Qubico/video-toolkit`
- **ä»»åŠ¡ç±»å‹**: `face-swap`
- **ä»·æ ¼**: $0.004 / å¸§

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶æˆ– Vercel Dashboard ä¸­æ·»åŠ ï¼š

```bash
# PiAPI API Key
PIAPI_API_KEY=a456b8f0b6cdc6e30e5b195eb66197740b8ca501da3d1051861dad4c2f6d8377

# é€‰æ‹©ä½¿ç”¨çš„ APIï¼ˆé»˜è®¤ä½¿ç”¨ PiAPIï¼‰
FACESWAP_API=piapi

# å¿…éœ€ï¼šå›¾ç‰‡ä¸Šä¼ æœåŠ¡
IMGBB_API_KEY=ä½ çš„imgbb_key
```

### Vercel éƒ¨ç½²

åœ¨ Vercel Dashboard ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

1. è¿›å…¥é¡¹ç›®è®¾ç½® â†’ Environment Variables
2. æ·»åŠ ï¼š
   - `PIAPI_API_KEY` = `a456b8f0b6cdc6e30e5b195eb66197740b8ca501da3d1051861dad4c2f6d8377`
   - `FACESWAP_API` = `piapi`
   - `IMGBB_API_KEY` = `ä½ çš„imgbb_key`

## ğŸ“Š API å‚æ•°

### åˆ›å»ºä»»åŠ¡è¯·æ±‚

```json
{
  "model": "Qubico/video-toolkit",
  "task_type": "face-swap",
  "input": {
    "swap_image": "https://example.com/face.jpg",    // è¦æ›¿æ¢çš„äººè„¸å›¾ç‰‡ URL
    "target_video": "https://example.com/video.mp4", // ç›®æ ‡è§†é¢‘ URL
    "swap_faces_index": "0",                          // æºå›¾ç‰‡ä¸­çš„äººè„¸ç´¢å¼•ï¼ˆå¯é€‰ï¼‰
    "target_faces_index": "0"                         // ç›®æ ‡è§†é¢‘ä¸­çš„äººè„¸ç´¢å¼•ï¼ˆå¯é€‰ï¼‰
  }
}
```

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "task_id": "736fde4d-9029-4915-8189-01353d6982cb",
    "status": "processing",
    "output": {
      "video_url": "https://example.com/result.mp4"
    }
  }
}
```

## ğŸ”§ æŠ€æœ¯é™åˆ¶

- **æ–‡ä»¶æ ¼å¼**: MP4  only
- **æ–‡ä»¶å¤§å°**: æœ€å¤§ 10MB
- **åˆ†è¾¨ç‡**: æœ€å¤§ 720p
- **å¸§æ•°é™åˆ¶**: æœ€å¤§ 600 å¸§/è§†é¢‘
- **å›¾ç‰‡å¤§å°**: æœ€å¤§ 2048 x 2048

## ğŸ’° å®šä»·

- **$0.004 / å¸§**
- åŸºäºå¤„ç†çš„æ€»å¸§æ•°è®¡ç®—

### æˆæœ¬ç¤ºä¾‹

| è§†é¢‘æ—¶é•¿ (30fps) | å¸§æ•° | æˆæœ¬ |
|----------------|------|------|
| 3 ç§’ | 90 å¸§ | $0.36 |
| 5 ç§’ | 150 å¸§ | $0.60 |
| 10 ç§’ | 300 å¸§ | $1.20 |

## ğŸ¯ äººè„¸ç´¢å¼•è¯´æ˜

### é»˜è®¤è¡Œä¸º
- å¦‚æœä¸æŒ‡å®šç´¢å¼•ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶æ’åºäººè„¸
- é»˜è®¤ä»å·¦åˆ°å³æ’åºï¼šå·¦è¾¹ â†’ ç´¢å¼• 0ï¼Œå³è¾¹ â†’ ç´¢å¼• 1

### ç‰¹æ®Šæƒ…å†µ
- å¦‚æœäººè„¸å‘ˆå¯¹è§’çº¿åˆ†å¸ƒï¼Œå¯èƒ½ä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ’åºï¼š
  - å·¦ä¸Šè§’ â†’ ç´¢å¼• 1
  - å³ä¸‹è§’ â†’ ç´¢å¼• 0

### ç¤ºä¾‹

#### äº¤æ¢å¯¹åº”ä½ç½®çš„äººè„¸
```json
{
  "swap_faces_index": "0 1",
  "target_faces_index": "0 1"
}
```
æ•ˆæœï¼šå·¦è¾¹æ›¿æ¢å·¦è¾¹ï¼Œå³è¾¹æ›¿æ¢å³è¾¹

#### äº¤æ¢ä½ç½®
```json
{
  "swap_faces_index": "0 1",
  "target_faces_index": "1 0"
}
```
æ•ˆæœï¼šå·¦è¾¹æ›¿æ¢å³è¾¹ï¼Œå³è¾¹æ›¿æ¢å·¦è¾¹

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: API Key æ— æ•ˆ

**ç—‡çŠ¶**: 401 Unauthorized

**è§£å†³**:
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `PIAPI_API_KEY`
2. ç¡®ä¿ API Key æ­£ç¡®é…ç½®
3. åœ¨ Vercel ä¸­é‡æ–°éƒ¨ç½²ä»¥ç¡®ä¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ

### é—®é¢˜ 2: æ–‡ä»¶å¤§å°è¶…é™

**ç—‡çŠ¶**: æ–‡ä»¶å¤§å°é”™è¯¯

**è§£å†³**:
- ç¡®ä¿è§†é¢‘æ–‡ä»¶ < 10MB
- ç¡®ä¿å›¾ç‰‡åˆ†è¾¨ç‡ â‰¤ 2048x2048
- å‹ç¼©è§†é¢‘æˆ–é™ä½åˆ†è¾¨ç‡

### é—®é¢˜ 3: æ ¼å¼ä¸æ”¯æŒ

**ç—‡çŠ¶**: æ ¼å¼é”™è¯¯

**è§£å†³**:
- ç¡®ä¿è§†é¢‘æ˜¯ MP4 æ ¼å¼
- ä½¿ç”¨ ffmpeg è½¬æ¢è§†é¢‘æ ¼å¼ï¼š
  ```bash
  ffmpeg -i input.mp4 -c:v libx264 -c:a aac output.mp4
  ```

### é—®é¢˜ 4: ä»»åŠ¡è¶…æ—¶

**ç—‡çŠ¶**: å¤„ç†æ—¶é—´è¿‡é•¿

**è§£å†³**:
- æ£€æŸ¥è§†é¢‘å¸§æ•°æ˜¯å¦è¶…è¿‡ 600 å¸§é™åˆ¶
- å¦‚æœè§†é¢‘å¤ªé•¿ï¼Œè€ƒè™‘è£å‰ªåˆ°æ›´çŸ­ç‰‡æ®µ
- æ­£å¸¸å¤„ç†æ—¶é—´é€šå¸¸åœ¨ 1-3 åˆ†é’Ÿ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [PiAPI å®˜æ–¹æ–‡æ¡£](https://piapi.ai/docs)
- [è§†é¢‘æ¢è„¸ API](https://piapi.ai/docs/faceswap-api/video-faceswap)
- [ä»»åŠ¡æŸ¥è¯¢ API](https://piapi.ai/docs/faceswap-api/get-task)

## âœ… æ€»ç»“

PiAPI æ˜¯ä¸€ä¸ªå¯é çš„è§†é¢‘æ¢è„¸æœåŠ¡ï¼š

- âœ… **é«˜è´¨é‡è¾“å‡º**
- âœ… **æ”¯æŒå¤šäººè„¸äº¤æ¢**
- âœ… **çµæ´»çš„ç´¢å¼•æ§åˆ¶**
- âœ… **åˆç†çš„å®šä»·** ($0.004/å¸§)
- âœ… **ç®€å•çš„ API é›†æˆ**

ç«‹å³å¼€å§‹ä½¿ç”¨ PiAPI è¿›è¡Œè§†é¢‘æ¢è„¸ï¼

